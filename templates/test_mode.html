{% extends "base.html" %}
{% block title %}Test Mode{% endblock %}
{% block header %}Test Mode{% endblock %}
{% block content %}
<div class="container-fluid">
    <div class="page">
        <div class="alert alert-warning">
            <i class="bi bi-exclamation-triangle me-1"></i> Test Mode: Manual Relay Control
        </div>

        <section class="panel">
            <div class="panel-title">Relay Controls</div>
            <div class="relay-grid">
                {% for relay_name, state in relays.items() %}
                <button id="{{ relay_name }}" 
                        class="btn btn-relay {{ 'btn-success' if state else 'btn-danger' }} w-100" 
                        onclick="toggleRelay('{{ relay_name }}')">
                    <i class="bi bi-{{ 'toggle-on' if state else 'toggle-off' }}"></i>{{ relay_name }}
                </button>
                {% endfor %}
            </div>
        </section>

        <section class="panel">
            <div class="panel-title">Test Functions</div>
            <div class="grid grid-3">
                <button id="timeTestBtn" class="btn btn-primary w-100">
                    <i class="bi bi-clock"></i>Time Test
                </button>
                <button id="selfTestBtn" class="btn btn-info w-100">
                    <i class="bi bi-gear"></i>Self Test
                </button>
                <button id="toggleAllButton" class="btn btn-warning w-100">
                    <i class="bi bi-toggles"></i>All ON
                </button>
            </div>
        </section>

        <section class="panel">
            <div class="panel-title">Log</div>
            <div class="log-container" style="height: 150px;">
                <div id="log-content">
                    System test mode initialized...
                </div>
            </div>
        </section>
    </div>
</div>

<!-- Test Modal -->
<div id="test-modal" class="modal fade" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-white">
            <div class="modal-header border-secondary">
                <h5 class="modal-title">Modal Title</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" onclick="closeModal()"></button>
            </div>
            <div class="modal-body">
                <p>Modal message goes here.</p>
            </div>
            <div class="modal-footer border-secondary">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="closeModal()">Close</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/test_mode.js"></script>
{% endblock %}
